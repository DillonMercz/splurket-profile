<html><head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Codeply">
  <title>Splurket Profile</title>
  <base target="_self"> 
    <script src="https://www.gstatic.com/firebasejs/8.2.5/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.2.5/firebase-analytics.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.2.5/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.2.5/firebase-firestore.js"></script>
  <script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css">  
  

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <script src="https://code.jquery.com/jquery-3.4.1.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
      crossorigin="anonymous"></script>

  <link rel="stylesheet" href="croppie/croppie.css">
  <script src="croppie/croppie.js"></script>

  <link rel="stylesheet" href="css/style.css">
  <style>/* CSS used here will be applied after bootstrap.css */</style>
</head>
<body>
  <div class="container">
	<div class="row" style="margin:auto;">
      <!-- left column -->
      <!--xx<div class="col-md-3">-->
        <!-- edit form column -->
        <div class="text-center">
          <div id="AddAlert" class="alert alert-warning alert-block" style="display:none;">
              <p id="AddAlertMessage"></p>
          </div>
              <!--<div class="mt-3 row">
                  <div class="col-md-6">
                      <center><div id="uploaded_pic" hidden="hidden">
                          <img class="img-chosen" alt="Your image!"
                              src="" width="150px" height="150px" onchange="update_pic(this.src)" style="display: none"><hr>
                      </div>-->
                      <div hidden="hidden">
                      <input type="file" accept="image/*" name="upload_image" id="upload_image"><hr>
                    </div>
                      <!--<center><button id="btnGrab" class="btn btn-success">Select New</button></center>
                      </div></center>
                      <br>
                  </div>-->
              </div>
      </div>
      <!--xx<center><div class="col-md-9 personal-info">-->
        <!--<div class="alert alert-info alert-dismissable">
          <a class="panel-close close" data-dismiss="alert">Ã—</a> 
          <i class="fa fa-coffee"></i>
          This is an <strong>.alert</strong>. Use this to show important messages to the user.
        </div>-->
        <!--xx<center><h3 id="avatarusername"></h3></center>-->
        
        <!--<form class="form-horizontal" role="form">
          <div class="form-group">
            <label class="col-md-3 control-label">Username:</label>
            <div class="col-md-8">
              <input class="form-control" type="text" id="username" value="">
            </div>
          </div>
          <div class="form-group">
            <label class="col-lg-3 control-label">First name:</label>
            <div class="col-lg-8">
              <input class="form-control" type="text" id="first_name" value="">
            </div>
          </div>
          <div class="form-group">
            <label class="col-lg-3 control-label">Last name:</label>
            <div class="col-lg-8">
              <input class="form-control" type="text" id="last_name" value="">
            </div>
          </div>
          <div class="form-group">
            <label class="col-lg-3 control-label">Email:</label>
            <div class="col-lg-8">
              <input class="form-control" type="text" id="email" value="">
            </div>
          </div>
          <div class="form-group">
            <label class="col-lg-3 control-label">Discord:</label>
            <div class="col-lg-8">
              <input class="form-control" type="text" id="discord" value="">
            </div>
          </div>
          <div class="form-group">
            <label class="col-lg-3 control-label">Company:</label>
            <div class="col-lg-8">
              <input class="form-control" type="text" id="company" value="">
            </div>
          </div>
          <div class="form-group">
            <label class="col-lg-3 control-label">Phone Number:</label>
            <div class="col-lg-8">
              <input class="form-control" type="text" id="phone" value="">
            </div>
          </div>-->

          <!--<div class="form-group">
            <label class="col-md-3 control-label">Password:</label>
            <div class="col-md-8">
              <input class="form-control" type="password" id="password" value="11111122333">
            </div>
          </div>
          <div class="form-group">
            <label class="col-md-3 control-label">Confirm password:</label>
            <div class="col-md-8">
              <input class="form-control" type="password" value="11111122333">
            </div>
          </div>-->
          <!--<div class="form-group">
            <label class="col-md-3 control-label"></label>
            <div class="col-md-8">
              <button type="button" class="btn btn-primary" style="background-color: #52b36c;border-color: #52b36c" onclick="savechanges()" value="Save Changes">Save Changes</button>
              <span></span>
              <input type="reset" class="btn btn-default" value="Cancel">
            </div>
          </div>
        </form>-->
      <!--xx</div>-->
  </div>
</div></center>


      <!-- The Modal -->
      <div class="modal" id="uploadImageModal">
          <div class="modal-dialog">
              <div class="modal-content">

                  <!-- Modal Header -->
                  <div class="modal-header">
                      <h4 class="modal-title">Crop Image</h4>
                      <button id="closeModal" type="button" class="close" data-dismiss="modal">&times;</button>
                  </div>

                  <!-- Modal body -->
                  <div class="modal-body">
                      <div id="image_demo" style="width: 300px;"></div>
                  </div>

                  <!-- Modal footer -->
                  <div class="modal-footer">
                      <button id="confirmCrop" type="button" class="btn btn-success">Confirm!</button>
                  </div>

              </div>
          </div>
      </div>
    </div>
  </div>
</div>



</body>









<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="https://fonts.googleapis.com/css?family=Karla:400,700&display=swap" rel="stylesheet">
    <link rel="icon" src="/assets/images/Logo.ico">
    <link rel="stylesheet" href="https://cdn.materialdesignicons.com/4.8.95/css/materialdesignicons.min.css">
    <link rel="stylesheet" href="../assets/css/user.css">
        <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900'>
    <link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/@mdi/font@5.x/css/materialdesignicons.min.css'>
    <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Material+Icons'>
    <link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/vuetify@2.4.11/dist/vuetify.min.css'>

    <link rel="icon" type="image/x-icon" href="../assets/images/Logo.png" />
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" integrity="sha512-HK5fgLBL+xu6dm/Ii3z4xhlSUyZgTT9tuc/hSrtw6uzJOvgRr2a9jyxxT1ely+B+xFAmJKVSTbpM/CuL7qxO8w==" crossorigin="anonymous" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!-- css -->
    <link href='https://fonts.googleapis.com/css?family=Shadows Into Light Two' rel='stylesheet'>
    <script src="https://unpkg.com/vue"></script>
</head>
<style type="text/css">
    .headerdrop {
      position: absolute;
      border-top:solid 2px;
      border-color: white;
      top:98px;
      background-color: #52b36c;
      width:100%;
      color: white;
      display: none;
      z-index: 5;
}
    .headerdrop:hover{
        display: block;
    }
    .search-box{
    display: inline;
    border-right: 1px solid var(--secondary);
    padding-right: 12px;
    margin-right: 10px;
}
.subheading:hover{
    color:#52b36c;
    text-decoration: underline;
}
.e546783wyte {
    color: rgb(135, 135, 135);
    font-size: 15px;
    padding-left: 16px;
    padding-top: 0px;
    color: #222325;
    line-height: 22px;
    font-weight: 400;
    height: 65px;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
    overflow: hidden;
    padding: 0 12px 5px;
    margin-top: 5px;
    word-wrap: break-word;
    word-break: break-word;
    -webkit-transition: .15s ease-in-out;
    -o-transition: .15s ease-in-out;
    transition: .15s ease-in-out;
    display: block;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
}
.shadowlight{
    font-family: 'Shadows Into Light Two';
}
.mb-1{
    background-color: white;
}
.v-menu__content .theme--light .menuable__content__active{
    top:55px !important;
    left:650px !important;
}
.cardtit:hover{
    color:#52b36c;
    cursor: pointer;
    text-decoration: underline;
}
.subheading{
    cursor: pointer;
    color: #222325;
    line-height: 22px;
    font-weight: 400;
    height: 43px;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
    overflow: hidden;
    padding: 0 12px 5px;
    margin-top: 5px;
    word-wrap: break-word;
    word-break: break-word;
    -webkit-transition: .15s ease-in-out;
    -o-transition: .15s ease-in-out;
    transition: .15s ease-in-out;
    display: block;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
}
</style>

    <!-- Header.. -->
<body>
<style type="text/css">
v-card-title{
display:block;
}
</style><!-- partial:index.partial -->
<div id="app" style="width:100%">
  <v-app id="inspire">
    <v-container fluid style="min-height:100%">
      <v-data-iterator
        :items="items"
        :items-per-page.sync="itemsPerPage"
        :page.sync="page"
        :search="search"
        :sort-by="sortBy.toLowerCase()"
        :sort-desc="sortDesc"
        hide-default-footer
        disable-pagination
        dense
      >
    <template v-slot:header="props">
            <div style="height:100%;width:70%;position:absolute;right:0px;z-index:3;top:20px">
                <v-tabs color="#52b36c">
                <v-tab>General Settings</v-tab>
                  <v-tab-item
                  >
        <form class="form-horizontal" role="form"style="width:50%">
          <div class="form-group">
            <label class="col-md-3 control-label">Username:</label>
            <div class="col-md-8">
              <input class="form-control" type="text" id="username" value="" disabled>
            </div>
          </div>
          <div class="form-group">
            <label class="col-lg-3 control-label">First name:</label>
            <div class="col-lg-8">
              <input class="form-control" type="text" id="first_name" value="">
            </div>
          </div>
          <div class="form-group">
            <label class="col-lg-3 control-label">Last name:</label>
            <div class="col-lg-8">
              <input class="form-control" type="text" id="last_name" value="">
            </div>
          </div>
          <div class="form-group">
            <label class="col-lg-3 control-label">Email:</label>
            <div class="col-lg-8">
              <input class="form-control" type="text" id="email" value="">
            </div>
          </div>
          <div class="form-group">
            <label class="col-lg-3 control-label">Discord:</label>
            <div class="col-lg-8">
              <input class="form-control" type="text" id="discord" value="">
            </div>
          </div>
          <div class="form-group">
            <label class="col-lg-3 control-label">Company:</label>
            <div class="col-lg-8">
              <input class="form-control" type="text" id="company" value="">
            </div>
          </div>
          <div class="form-group">
            <label class="col-lg-3 control-label">Phone Number:</label>
            <div class="col-lg-8">
              <input class="form-control" type="text" id="phone" value="">
            </div>
          </div>
          <!--<div class="form-group">
            <label class="col-md-3 control-label">Password:</label>
            <div class="col-md-8">
              <input class="form-control" type="password" id="password" value="11111122333">
            </div>
          </div>
          <div class="form-group">
            <label class="col-md-3 control-label">Confirm password:</label>
            <div class="col-md-8">
              <input class="form-control" type="password" value="11111122333">
            </div>
          </div>-->
          <div class="form-group">
            <label class="col-md-3 control-label"></label>
            <div class="col-md-8">
              <v-btn type="button" class="btn btn-primary" style="background-color: #52b36c;border-color: #52b36c;color:white" onclick="savechanges()" value="Save Changes">Save Changes</v-btn>
              <span></span>
              <input type="reset" class="btn btn-default" value="Cancel">
            </div>
          </div>
        </form>
                </v-tab-item> <v-tab onclick = "updatecreator()">Creator Settings</v-tab>
                        <v-tab-item>
                          <h3 style="color: #52b36c;margin-left:25px">Splurket Creator Profile</h3>
                          <v-divider style="width:25%;margin-left:25px"></v-divider>
          <form class="form-horizontal" role="form"style="width:50%">
          <div class="form-group">
            <label class="col-lg-3 control-label">Tagline</label>
            <div class="col-lg-8">
              <input class="form-control" type="text" id="tagline" value="">
            </div>
          </div>
          <div class="form-group">
            <label class="col-lg-3 control-label">Location</label>
            <div class="col-lg-8">
              <input class="form-control" type="text" id="location" value="">
            </div>
          </div>
          <div class="form-group">
            <label class="col-lg-3 control-label">Education</label>
            <div class="col-lg-8">
              <input class="form-control" type="text" id="education" value="">
            </div>
          </div>
          <div class="form-group">
            <label class="col-lg-3 control-label">Skills:</label>
            <div class="col-lg-8">
              <v-layout wrap>
                <v-flex xs12>
                  <v-combobox multiple
                            v-model="skills" 
                            label="Skills" 
                            append-icon
                            chips
                            deletable-chips
                            class="tag-input"
                            :delimiters="[',']"
                            @keyup.tab="updateTags"
                            @paste="updateTags"
                            id = "skills">
                  </v-combobox>
                </v-flex> 

              </v-layout>
            </div>
          </div>
          
          <!--<div class="form-group">
            <label class="col-md-3 control-label">Password:</label>
            <div class="col-md-8">
              <input class="form-control" type="password" id="password" value="11111122333">
            </div>
          </div>
          <div class="form-group">
            <label class="col-md-3 control-label">Confirm password:</label>
            <div class="col-md-8">
              <input class="form-control" type="password" value="11111122333">
            </div>
          </div>-->
          <div class="form-group">
            <label class="col-md-3 control-label"></label>
            <div class="col-md-8">
              <v-btn type="button" class="btn btn-primary" style="background-color: #52b36c;border-color: #52b36c;color:white" onclick="savecreatorchanges()" value="Save Changes">Save Changes</v-btn>
              <span></span>
              <input type="reset" class="btn btn-default" value="Cancel">
            </div>
          </div>
        </form>
        </v-tab-item>
                    <v-tab>Pay Settings</v-tab>
                        <v-tab-item
                      >
                      <v-row style="margin-top:10px;position:relative;width:100%;height:100%">
                        <!--<v-col
                          v-for="badge in badges"
                          :key="badge.name"
                          cols="12"
                          sm="6"
                          md="4"
                          lg="3"
                          style="min-width:324px"

                        >

                        <v-card style="width:100%">
                            <img :src="badge.image" style="height:250px;width:100%"><br>
                            <v-card-title class="subheading font-weight-bold">
                              {{ badge.name }}
                            </v-card-title>-->

                            <!--<v-list dense>
                              <v-list-product
                                v-for="(key, index) in filteredKeys"
                                :key="index"
                              >
                                <v-list-product-content :class="{ 'blue--text': sortBy === key }">
                                  {{ key }}:
                                </v-list-product-content>
                                <v-list-product-content
                                  class="align-end"
                                  :class="{ 'blue--text': sortBy === key }"
                                >
                                  {{ product[key.toLowerCase()] }}
                                </v-list-product-content>
                              </v-list-product>-->

                          <!--</v-card>
                      </v-tab-item>
                  </v-col>
              </v-row>-->


            </v-row>
          </v-tab-item>
          <v-tab>Messaging Settings</v-tab>
          <v-tab-item>
          </v-tab-item>

          </v-tabs></center>
</div>
</template>
  
        <template v-slot:default="props">
            <v-col
              v-for="item in props.items"
              :key="item.name"
              cols="12"
              sm="6"
              md="4"
              lg="3"
            >
              <v-card :id="item.name">
                <div style="
                    height: 5px;
                "></div>
                <center><img
                  height="150px"
                  width="150px"
                  :src="item.image"
                  id="myImage"
                  onclick="document.getElementById('upload_image').click()"
                  onchange="update_pic(this.src)"
                  style="border-radius: 50%;margin-top:50px"
                ></img></center>
              </div>
                <center><v-card-title class="subheading font-weight-bold" :id="item.id" style="display:block">
                  {{ item.name }}
                </v-card-title></center>
                <strong><center><p style="font-family: 'Shadows Into Light Two';font-size:15px">{{ item.tag }}</p></center></strong><br>
  
                <!--<v-list dense>
                  <v-list-item
                    v-for="(key, index) in filteredKeys"
                    :key="index"
                  >
                    <v-list-item-content :class="{ 'blue--text': sortBy === key }">
                      {{ key }}:
                    </v-list-item-content>
                    <v-list-item-content
                      class="align-end"
                      :class="{ 'blue--text': sortBy === key }"
                    >
                      {{ item[key.toLowerCase()] }}
                    </v-list-item-content>
                  </v-list-item>-->
              </v-card>
              
            </v-col>
          </v-row>
        </template>
       <!-- <template v-slot:footer>
          <v-row
            class="mt-2"
            align="center"
            justify="center"
          >
            <span class="grey--text">Items per page</span>
            <v-menu offset-y>
              <template v-slot:activator="{ on, attrs }">
                <v-btn
                  dark
                  text
                  color="primary"
                  class="ml-2"
                  v-bind="attrs"
                  v-on="on"
                >
                  {{ itemsPerPage }}
                  <v-icon>mdi-chevron-down</v-icon>
                </v-btn>
              </template>
              <v-list>
                <v-list-item
                  v-for="(number, index) in itemsPerPageArray"
                  :key="index"
                  @click="updateItemsPerPage(number)"
                >
                  <v-list-item-title>{{ number }}</v-list-item-title>
                </v-list-item>
              </v-list>
            </v-menu>
  
            <v-spacer></v-spacer>
  
            <span
              class="mr-4
              grey--text"
            >
              Page {{ page }} of {{ numberOfPages }}
            </span>
            <v-btn
              fab
              dark
              color="blue darken-3"
              class="mr-1"
              @click="formerPage"
            >
              <v-icon>mdi-chevron-left</v-icon>
            </v-btn>
            <v-btn
              fab
              dark
              color="blue darken-3"
              class="ml-1"
              @click="nextPage"
            >
              <v-icon>mdi-chevron-right</v-icon>
            </v-btn>
          </v-row>
        </template>-->
      </v-data-iterator>
    </v-container>
  </v-app>
</div>
<script>
      $("#myImage").click(function() {
          $("input[id='upload_image']").click();
  });
  </script>
  <script src='https://cdn.jsdelivr.net/npm/babel-polyfill/dist/polyfill.min.js'></script>
<script src='https://cdn.jsdelivr.net/npm/vue@2.x/dist/vue.js'></script>
<script src='https://cdn.jsdelivr.net/npm/vuetify@2.4.11/dist/vuetify.min.js'></script>
  <script>
    var username;
var product_items;
var catshit;
var user_data = [];
var products=[];
var badges=[];
var reviews=[];
var skills=[];
var user;
var pro_pic;
var email1;
    function getParameterByName(name, url = window.location.href) {
            name = name.replace(/[\[\]]/g, '\\$&');
            var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
                results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, ' '));
    }
        var name, email, photoUrl, uid, emailVerified;

        var config = {
            apiKey: "AIzaSyC-BUGGSsvUX8z4W1LcsJzS59yrL4__EsE",
            authDomain: "splurket-66df1.firebaseapp.com",
            databaseURL: "https://splurket-66df1-default-rtdb.firebaseio.com",
            projectId: "splurket-66df1",
            storageBucket: "splurket-66df1.appspot.com",
            messagingSenderId: "286706779903",
            appId: "1:286706779903:web:fd91c29319f9804e192eca",
            measurementId: "G-QWQ2M658KL"
          };
        firebase.initializeApp(config);
        const db = firebase.firestore();
        db.settings({ timestampsInSnapshots: true }); 
        firebase.auth().onAuthStateChanged(function(user) {
          if (user) {
            // User is signed in.
            var user = firebase.auth().currentUser;
            //splurket@gmail.com
            var email1 = user.email;
            
            /*var email = getParameterByName('user'); 
            console.log(email)*/
            //still splurket
            
            var myHeaders = new Headers();
            myHeaders.append("Content-Type", "text/plain");

            var raw = JSON.stringify({
              "flemishGiant": `${email1}`
            });
            //document.write(raw)
            var requestOptions = {
              method: 'POST',
              headers: myHeaders,
              body: raw,
              redirect: 'follow'
            };

            fetch("https://script.google.com/macros/s/AKfycbwd3VKlX6ajjUYSkrg9YOEu3fDg-F0PJsRvv8ia0bhPX6OHn_Lk1a4N7dVx3nKEacui/exec", requestOptions)
              .then(function (response) {
                  return response.json();
              })
              .then(function (data) {
                //should be a base64 string by now
                getuserdata1(data);
            });
          } else {
            console.log('fuck')
            document.getElementById("avatar").style.display = "none";
            document.getElementById("login").style.display = "block";
          }
        });

        function getuserdata1(data) {
            email = data.encryptedstring;
                var docRef = db.collection("users").doc(email);
                docRef.get().then((doc) => {
                    if (doc.exists) {
                        data1 = doc.data()
                        pro_pic = data1.pro_pic;
                        first_name = data1.first_name;
                        last_name = data1.last_name;
                        username = data1.username;
                        email = data1.email;
                        discord = data1.discord;
                        company = data1.company
                        phone = data1.phone_number

                        if (data1.username == "" ){
                            user_name = data1.email
                        }
                        if (data1.username != "") {
                            user_name = data1.username;
                        }
                        pro_pic = pro_pic

                        //document.getElementById("avatarusername").innerText = "Profile Info For " + user_name + ":";
                        //document.getElementById("avatarusername1").innerText = "Signed In As: " + user_name;
                        //document.getElementById("uploaded_pic").style.display = "block";
                        document.getElementById("first_name").value = first_name;
                        document.getElementById("last_name").value = last_name;
                        document.getElementById("username").value = username;
                        document.getElementById("email").value = email;
                        document.getElementById("discord").value = discord;
                        document.getElementById("company").value = company;
                        document.getElementById("phone").value = phone;
                        getuserprodata(username)
                    } else {
                        // doc.data() will be undefined in this case
                        console.log("No such document!");
                        console.log(doc.data())
                    }
                }).catch((error) => {
                    console.log("Error getting document:", error);
                });
        }
function getuserprodata(prodata){
  var docRef = db.collection('pubusers').doc(prodata);
    docRef.get().then((doc) => {
      if (doc.exists) {
            var doc= doc.data();
            var reviewsint= parseFloat(`${doc.Reviewsn}`)
            var skills1=doc.Skills
            skills2=skills1.split(',');
            skills2.forEach((skill3) => {skills.push(skill3)});
            var push_data1 = {value: false, name: `${doc.username}`, image: `${doc.image}`, location: `${doc.Location}`, education: `${doc.Education}`, date: `${doc.Date}`, tag: `${doc.tagline}`, reviewsn: reviewsint, skills: skills}
            if (user_data.includes('{')){
              var push_data = ','+push_data1;
              user.push(push_data)
            }else{
              user_data.push(push_data1)
     
            }//document.write(product_data)
          } else {
              // doc.data() will be undefined in this case
              user_data=[{
                value: false,
                name: 'No User Found'}]
          }
      }).catch((error) => {
          console.log("Error getting document:", error);
      });
      db.collection("pubusers").doc(prodata).collection('products').get().then((querySnapshot) => {
            querySnapshot.forEach((doc3) => {
              if (doc3.exists) {
                var doc3= doc3.data();
                var productnm = doc3.name;
                prodget(productnm);
                }
              })
            })
      db.collection("pubusers").doc(prodata).collection('reviews').get().then((querySnapshot) => {
        querySnapshot.forEach((doc2) => {
          if (doc2.exists) {
            var doc= doc2.data();
            var reviewrate=parseFloat(`${doc.rate}`)
            var reviewdata = {value: false, name: `${doc.Name}`, reviewer:`${doc.Reviewer}`, desc: `${doc.Description}`, rate: reviewrate};
            if (reviews.includes('{')){
                var push_data = ','+reviewdata;
                reviews.push(push_data)


              }else{
                reviews.push(reviewdata)

              }//document.write(product_data)
            } else {
                // doc.data() will be undefined in this case
                reviews=[{
                  value: false,
                  name: 'No Reviews Found',
                  reviewer: 'N/A',
                  desc: 'N/A',
                  rate: 'N/A' }]
            }
          })

        })
    }
      $(function () {
          $image_crop = $('#image_demo').croppie(
              {
                  enableExif: true,
                  viewport: {
                      width: 150,
                      height: 150,
                      type: 'circle'
                  },
                  boundary: {
                      width: 300,
                      height: 300
                  }
              });

          $('#btnGrab').click(function () {
              $('#upload_image').click();
          });

          var selectedFile;

          $("#upload_image").change(function (evt) {
              if ((selectedFile = evt.target.files[0])) {
                  validateImageSizeType(selectedFile);
              }
          });

          function validateImageSizeType(selectedImage){
              var _URL = window.URL || window.webkitURL;
              var img = new Image();

              img.onload = function() {
                  if(this.width >= 200 && this.height >= 200){
                      readImgShowModal(selectedImage);
                  }
                  else
                  {
                      showAlert("This image doesn't have the minimum size required: 200px / 200px");
                      $('#upload_image').val('');
                  }
              };

              img.onerror = function() {
                  showAlert("File type not valid: " + selectedImage.type);
              };
              
              img.src = _URL.createObjectURL(selectedImage);
          }

          function showAlert(msj) {
              $('#AddAlertMessage').html(msj);
              $("#AddAlert").show();
              setTimeout(function () { $("#AddAlert").hide(); }, 3500);
          }

          function readImgShowModal(selectedImg){
              
              //document.getElementById("upload_image").value = "";
              $('#upload_image').val('');

              var reader = new FileReader();
              reader.onload = function (event) {
                  $image_crop.croppie('bind', {
                      url: event.target.result
                  }).then(function () {
                      console.log('Bind complete!');
                  });
              }
              reader.readAsDataURL(selectedImg);
              $('#uploadImageModal').modal('show');
          }

          $('#closeModal').click(function(){
              var vmyImage = document.getElementById("myImage");
              var vmyImg = new Image();

              vmyImage.title = "Your image!";
              vmyImg.title = "Your image!";

              var nameImage = document.getElementById("nameMyImage");
              var nameImg = document.getElementById("nameMyImg");

              nameImage.innerHTML = "avatar";
              nameImg.innerHTML = "avatar";
              
              vmyImage.src = "img/avatar-default-icon.png";
              vmyImg.src = "img/avatar_placeholder_temporary.png";

              vmyImg.className = "img-thumbnail img-chosen";
              vmyImg.alt = "Your image!";

              document.getElementById('myImg').innerHTML = "";
              document.getElementById('myImg').append(vmyImg);
          });

          $('#confirmCrop').click(function () {
              $image_crop.croppie('result', {
                  type: 'canvas',
                  size: 'viewport'
              }).then(function (response) {            
                  $('#noteInfo').html('You can select another picture!');

                  withJSpure(response);

                  $('#nameMyImg').html(selectedFile.name);

                  $('#myImg').html('');
                  $("<img>", {
                      "src": response,
                      "class": 'img-thumbnail img-chosen',
                      "alt": 'Your image!',
                      "title": selectedFile.name
                  }).appendTo("#myImg");            

                  $('#uploadImageModal').modal('hide');
              })
          });

          function withJSpure(resp) {
              var imgtag = document.getElementById("myImage");
              imgtag.title = selectedFile.name;

              var nameImg = document.getElementById("nameMyImage");
              
              imgtag.src = resp;
              update_pic(resp)          }

          /*     $('#upload_image').change(function (evnt) {
                  $('#noteInfo').html('You can select another picture!');
              
                  onChangeUploadJSpure(evnt);
              
                  var selectedFile = event.target.files[0];
                  var reader = new FileReader();
              
                  $('#myImg').attr('title', selectedFile.name);
                  $('#nameMyImg').html(selectedFile.name);
              
                  reader.onload = function (event) {
                      $("#myImg").attr("src", event.target.result);
                  };
              
                  reader.readAsDataURL(selectedFile);
              }); */

          /* function onChangeUploadJSpure(evt) {
              var selectedFile = event.target.files[0];
              var reader = new FileReader();

              var imgtag = document.getElementById("myImage");
              imgtag.title = selectedFile.name;

              var nameImg = document.getElementById("nameMyImage");
              nameImg.innerHTML = selectedFile.name;

              reader.onload = function (event) {
                  imgtag.src = event.target.result;
              };

              reader.readAsDataURL(selectedFile);
          } */
      });
  </script>
        </div>
      </div>
      
      
  <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>

  <script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <script>
    function prodget(productnames){
      console.log(productnames)
      var docRef = db.collection("products").doc(productnames);
        docRef.get().then((doc) => {
          if (doc.exists) {
            var doc= doc.data();
            var push_data2 = {value: false, id: `${doc.product_id}`, name:`${doc.product_name}`, price: `${doc.product_price}`, date: `${doc.creation_date}`, reviewsn: `${doc.product_reviewsn}`, creator: `${doc.product_creator}`, image: `${doc.product_cover}`, creatorpic: `${doc.product_creatorpic}`, desc: `${doc.product_description}`}
            if (products.includes('{')){
              var push_data = ','+push_data2;
              products.push(push_data)


            }else{
              products.push(push_data2)

            }//document.write(product_data)
          } else {

              // doc.data() will be undefined in this case
              products=[{
                value: false,
                name: 'No Products Found',
                Price: 'N/A',
                reviews: 'N/A',
                status: 'N/A' }]
          }
        }).catch((error) => {
            console.log(error)
      // An error happened.
    });
    }

app = new Vue({
  el: '#app',
    vuetify: new Vuetify(),
  data() {
    return {
      itemsPerPageArray: [15, 25, 50],
      search: '',
      filter: {},
      sortDesc: false,
      page: 1,
      itemsPerPage: 1,
      sortBy: 'name',
      keys1: [
      'Date',
      'Location',
      'Education',
      ],
      keys: [
      'Date',
      'Location',
      'Education',
      ],
      skills:skills,
      products:products,
      badges:badges,
      reviews:reviews,
      items: user_data,
      items1: [],
      search: ""};},
  computed: {
    numberOfPages() {
      return Math.ceil(this.items.length / this.itemsPerPage);
    },
    filteredKeys() {
      return this.keys.filter(key => key !== 'Name');
    } },

  methods: {
    update_field(){
      document.getElementById("location").value = this.items.location;
      document.getElementById("education").value = this.items.education;
      document.getElementById("tagline").value = this.items.tag;
    },
      updateTags() {
      this.$nextTick(() => {
        this.skills.push(...this.search.split(","));
        this.$nextTick(() => {
          this.search = "";
        });
      });
    },
    nextPage() {
      if (this.page + 1 <= this.numberOfPages) this.page += 1;
    },
    formerPage() {
      if (this.page - 1 >= 1) this.page -= 1;
    },
    updateItemsPerPage(number) {
      this.itemsPerPage = number;
    } } });
var list = document.getElementsByClassName('v-image__image');
for (var i in list) {
    console.log(list[i]);
}


        function signout() {
            firebase.auth().signOut().then(() => {
              // Sign-out successful.
            }).catch((error) => {
              // An error happened.
            });
        }
        function savechanges() {
          var user = firebase.auth().currentUser;
            //splurket@gmail.com
            var email1 = user.email;
            
            /*var email = getParameterByName('user'); 
            console.log(email)*/
            //still splurket
            
            var myHeaders = new Headers();
            myHeaders.append("Content-Type", "text/plain");

            var raw = JSON.stringify({
              "flemishGiant": `${email1}`
            });
            //document.write(raw)
            var requestOptions = {
              method: 'POST',
              headers: myHeaders,
              body: raw,
              redirect: 'follow'
            };

            fetch("https://script.google.com/macros/s/AKfycbwd3VKlX6ajjUYSkrg9YOEu3fDg-F0PJsRvv8ia0bhPX6OHn_Lk1a4N7dVx3nKEacui/exec", requestOptions)
              .then(function (response) {
                  return response.json();
              })
              .then(function (data) {
                //should be a base64 string by now
                email1 = data.encryptedstring;
                first_name_send = document.getElementById("first_name").value;
                last_name_send = document.getElementById("last_name").value;
                username_send = document.getElementById("username").value;
                email_send = document.getElementById("email").value;
                discord_send = document.getElementById("discord").value;
                company_send = document.getElementById("company").value;
                phone_send = document.getElementById("phone").value;
                db.collection('users').doc(email1).update({
                        first_name: first_name_send,
                        last_name: last_name_send,
                        //username: username_send,
                        email: email_send,
                        discord: discord_send,
                        phone_number: phone_send,
                        company: company_send,
            })
          });
        }
        function savecreatorchanges() {
          var user = firebase.auth().currentUser;
            //splurket@gmail.com
            var email1 = user.email;
            
            /*var email = getParameterByName('user'); 
            console.log(email)*/
            //still splurket
            
            var myHeaders = new Headers();
            myHeaders.append("Content-Type", "text/plain");

            var raw = JSON.stringify({
              "flemishGiant": `${email1}`
            });
            //document.write(raw)
            var requestOptions = {
              method: 'POST',
              headers: myHeaders,
              body: raw,
              redirect: 'follow'
            };

            fetch("https://script.google.com/macros/s/AKfycbwd3VKlX6ajjUYSkrg9YOEu3fDg-F0PJsRvv8ia0bhPX6OHn_Lk1a4N7dVx3nKEacui/exec", requestOptions)
              .then(function (response) {
                  return response.json();
              })
              .then(function (data) {
                //should be a base64 string by now
                email1 = data.encryptedstring;
                first_name_send = document.getElementById("first_name").value;
                last_name_send = document.getElementById("last_name").value;
                username_send = document.getElementById("username").value;
                email_send = document.getElementById("email").value;
                discord_send = document.getElementById("discord").value;
                company_send = document.getElementById("company").value;
                phone_send = document.getElementById("phone").value;
                db.collection('pubusers').doc(email1).update({
                        first_name: first_name_send,
                        last_name: last_name_send,
                        //username: username_send,
                        email: email_send,
                        discord: discord_send,
                        phone_number: phone_send,
                        company: company_send,
            })
          });
        }
      function update_pic(source){
        var user = firebase.auth().currentUser;
            //splurket@gmail.com
            var email1 = user.email;
            
            /*var email = getParameterByName('user'); 
            console.log(email)*/
            //still splurket
            
            var myHeaders = new Headers();
            myHeaders.append("Content-Type", "text/plain");

            var raw = JSON.stringify({
              "flemishGiant": `${email1}`
            });
            //document.write(raw)
            var requestOptions = {
              method: 'POST',
              headers: myHeaders,
              body: raw,
              redirect: 'follow'
            };

            fetch("https://script.google.com/macros/s/AKfycbwd3VKlX6ajjUYSkrg9YOEu3fDg-F0PJsRvv8ia0bhPX6OHn_Lk1a4N7dVx3nKEacui/exec", requestOptions)
              .then(function (response) {
                  return response.json();
              })
              .then(function (data) {
                //should be a base64 string by now
                email1 = data.encryptedstring;
                db.collection('users').doc(email1).update({
                pro_pic: source,

            })
            db.collection('pubusers').doc(username).update({
                image: source,
            })
                console.log(source)
          });
        }
        function updatecreator(){
            var docRef = db.collection('pubusers').doc(username);
            docRef.get().then((doc) => {
              if (doc.exists) {
                    var doc= doc.data();
                    document.getElementById("location").value = doc.Location;
                    document.getElementById("education").value = doc.Education;
                    document.getElementById("tagline").value = doc.tagline;
                  } else {
                      // doc.data() will be undefined in this case
                      user_data=[{
                        value: false,
                        name: 'No User Found'}]
                  }
              }).catch((error) => {
                  console.log("Error getting document:", error);
              })
        }
  </script>
<script src="croppie/croppie.js"></script>
</body>
